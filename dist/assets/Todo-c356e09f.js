import{r as o,b as f,j as s,T as W}from"./index-27119536.js";import{F as Y,v as K,a as V,f as X,C as w,b as D,E as N,c as Z}from"./DatePicker-24295304.js";import{D as C,X as j,o as b,I as T,y as k,l as L,s as J,R as Q,r as _,a as P}from"./Layout-027af473.js";function ee(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(n=>setTimeout(()=>{throw n}))}function F(){let e=[],n={addEventListener(t,r,l,a){return t.addEventListener(r,l,a),n.add(()=>t.removeEventListener(r,l,a))},requestAnimationFrame(...t){let r=requestAnimationFrame(...t);return n.add(()=>cancelAnimationFrame(r))},nextFrame(...t){return n.requestAnimationFrame(()=>n.requestAnimationFrame(...t))},setTimeout(...t){let r=setTimeout(...t);return n.add(()=>clearTimeout(r))},microTask(...t){let r={current:!0};return ee(()=>{r.current&&t[0]()}),n.add(()=>{r.current=!1})},style(t,r,l){let a=t.style.getPropertyValue(r);return Object.assign(t.style,{[r]:l}),this.add(()=>{Object.assign(t.style,{[r]:a})})},group(t){let r=F();return t(r),this.add(()=>r.dispose())},add(t){return e.push(t),()=>{let r=e.indexOf(t);if(r>=0)for(let l of e.splice(r,1))l()}},dispose(){for(let t of e.splice(0))t()}};return n}function te(){let[e]=o.useState(F);return o.useEffect(()=>()=>e.dispose(),[e]),e}function ne(e){var n,t;let r=(n=e==null?void 0:e.form)!=null?n:e.closest("form");if(r){for(let l of r.elements)if(l!==e&&(l.tagName==="INPUT"&&l.type==="submit"||l.tagName==="BUTTON"&&l.type==="submit"||l.nodeName==="INPUT"&&l.type==="image")){l.click();return}(t=r.requestSubmit)==null||t.call(r)}}let re="div";var M=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(M||{});function se(e,n){let{features:t=1,...r}=e,l={ref:n,"aria-hidden":(t&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(t&4)===4&&(t&2)!==2&&{display:"none"}}};return j({ourProps:l,theirProps:r,slot:{},defaultTag:re,name:"Hidden"})}let ae=C(se);function le(e,n,t){let[r,l]=o.useState(t),a=e!==void 0,i=o.useRef(a),c=o.useRef(!1),d=o.useRef(!1);return a&&!i.current&&!c.current?(c.current=!0,i.current=a,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!a&&i.current&&!d.current&&(d.current=!0,i.current=a,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[a?e:r,b(g=>(a||l(g),n==null?void 0:n(g)))]}let O=o.createContext(null);function R(){let e=o.useContext(O);if(e===null){let n=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(n,R),n}return e}function oe(){let[e,n]=o.useState([]);return[e.length>0?e.join(" "):void 0,o.useMemo(()=>function(t){let r=b(a=>(n(i=>[...i,a]),()=>n(i=>{let c=i.slice(),d=c.indexOf(a);return d!==-1&&c.splice(d,1),c}))),l=o.useMemo(()=>({register:r,slot:t.slot,name:t.name,props:t.props}),[r,t.slot,t.name,t.props]);return f.createElement(O.Provider,{value:l},t.children)},[n])]}let ie="p";function ce(e,n){let t=T(),{id:r=`headlessui-description-${t}`,...l}=e,a=R(),i=k(n);L(()=>a.register(r),[r,a.register]);let c={ref:i,...a.props,id:r};return j({ourProps:c,theirProps:l,slot:a.slot||{},defaultTag:ie,name:a.name||"Description"})}let de=C(ce),ue=Object.assign(de,{}),A=o.createContext(null);function I(){let e=o.useContext(A);if(e===null){let n=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(n,I),n}return e}function me(){let[e,n]=o.useState([]);return[e.length>0?e.join(" "):void 0,o.useMemo(()=>function(t){let r=b(a=>(n(i=>[...i,a]),()=>n(i=>{let c=i.slice(),d=c.indexOf(a);return d!==-1&&c.splice(d,1),c}))),l=o.useMemo(()=>({register:r,slot:t.slot,name:t.name,props:t.props}),[r,t.slot,t.name,t.props]);return f.createElement(A.Provider,{value:l},t.children)},[n])]}let pe="label";function he(e,n){let t=T(),{id:r=`headlessui-label-${t}`,passive:l=!1,...a}=e,i=I(),c=k(n);L(()=>i.register(r),[r,i.register]);let d={ref:c,...i.props,id:r};return l&&("onClick"in d&&(delete d.htmlFor,delete d.onClick),"onClick"in a&&delete a.onClick),j({ourProps:d,theirProps:a,slot:i.slot||{},defaultTag:pe,name:i.name||"Label"})}let fe=C(he),xe=Object.assign(fe,{}),E=o.createContext(null);E.displayName="GroupContext";let ge=o.Fragment;function ve(e){var n;let[t,r]=o.useState(null),[l,a]=me(),[i,c]=oe(),d=o.useMemo(()=>({switch:t,setSwitch:r,labelledby:l,describedby:i}),[t,r,l,i]),g={},v=e;return f.createElement(c,{name:"Switch.Description"},f.createElement(a,{name:"Switch.Label",props:{htmlFor:(n=d.switch)==null?void 0:n.id,onClick(p){t&&(p.currentTarget.tagName==="LABEL"&&p.preventDefault(),t.click(),t.focus({preventScroll:!0}))}}},f.createElement(E.Provider,{value:d},j({ourProps:g,theirProps:v,defaultTag:ge,name:"Switch.Group"}))))}let be="button";function ye(e,n){let t=T(),{id:r=`headlessui-switch-${t}`,checked:l,defaultChecked:a=!1,onChange:i,name:c,value:d,form:g,...v}=e,p=o.useContext(E),y=o.useRef(null),u=k(y,n,p===null?null:p.setSwitch),[h,x]=le(l,i,a),S=b(()=>x==null?void 0:x(!h)),q=b(m=>{if(_(m.currentTarget))return m.preventDefault();m.preventDefault(),S()}),B=b(m=>{m.key===P.Space?(m.preventDefault(),S()):m.key===P.Enter&&ne(m.currentTarget)}),G=b(m=>m.preventDefault()),H=o.useMemo(()=>({checked:h}),[h]),z={id:r,ref:u,role:"switch",type:J(e,y),tabIndex:0,"aria-checked":h,"aria-labelledby":p==null?void 0:p.labelledby,"aria-describedby":p==null?void 0:p.describedby,onClick:q,onKeyUp:B,onKeyPress:G},U=te();return o.useEffect(()=>{var m;let $=(m=y.current)==null?void 0:m.closest("form");$&&a!==void 0&&U.addEventListener($,"reset",()=>{x(a)})},[y,x]),f.createElement(f.Fragment,null,c!=null&&h&&f.createElement(ae,{features:M.Hidden,...Q({as:"input",type:"checkbox",hidden:!0,readOnly:!0,form:g,checked:h,name:c,value:d})}),j({ourProps:z,theirProps:v,slot:H,defaultTag:be,name:"Switch"}))}let je=C(ye),we=ve,Ce=Object.assign(je,{Group:we,Label:xe,Description:ue});function Ne(e,n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:n},e),o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"}))}const Te=o.forwardRef(Ne),ke=Te;function Ee(e,n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:n},e),o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"}))}const Se=o.forwardRef(Ee),$e=Se;function De(e,n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n},e),o.createElement("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"}))}const Pe=o.forwardRef(De),Re=Pe,Le=({checked:e,onChange:n})=>s.jsx(Ce,{checked:e,onChange:n,className:`${e?"bg-blue-500":"bg-gray-300"} relative inline-flex items-center h-6 rounded-full w-11 focus:outline-none transition-colors ease-in-out duration-200 mr-2`,children:s.jsx("span",{className:`${e?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform ease-in-out duration-200`})}),Ae=({todo:e})=>{const{toggleCompletedTodo:n,updateTodo:t,getTodoById:r,deleteTodo:l}=f.useContext(W),[a,i]=f.useState(!1),[c,d]=f.useState(!1),g={title:e.title,description:e.description,deadline:e.deadline,completed:e.completed},v=()=>{i(u=>!u)},p=()=>{d(u=>!u)},y=u=>{r(u).then(()=>{v()})};return s.jsx("div",{className:"p-2 border rounded-lg mb-2 bg-white",children:s.jsx(Y,{initialValues:g,validationSchema:K,onSubmit:(u,{setSubmitting:h})=>{const x={...e,...u};t(x).then(()=>{v(),h(!1)})},children:({values:u,setFieldValue:h})=>s.jsx(V,{children:a?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mt-2",children:[s.jsx(D,{type:"text",name:"title",style:{textDecoration:u.completed?"line-through":"none"},className:"title"}),s.jsx(N,{name:"title",component:"div",className:"text-red-600"})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx(D,{as:"textarea",name:"description",placeholder:"Add description",className:"description",type:"text",style:{textDecoration:u.completed?"line-through":"none"}}),s.jsx(N,{name:"description",component:"div",className:"text-red-600"})]}),s.jsx(Z,{name:"deadline",closeOnSelect:!0,value:e.deadline,onChange:x=>{h("deadline",x)}}),s.jsx(N,{name:"deadline",component:"div",className:"text-red-600"}),s.jsx("div",{className:"flex items-center mt-2 space-x-2",children:s.jsxs("div",{className:"mt-2 space-x-2",children:[s.jsx(w,{type:"submit",className:"confirm",text:"Confirm"}),s.jsx(w,{type:"button",onClick:v,className:"cancel",text:"Cancel"})]})})]}):s.jsxs("div",{className:"divide-y divide-gray-100",children:[s.jsxs("div",{className:"px-2 py-3 sm:grid sm:grid-cols-12 sm:gap-4 sm:px-0",children:[s.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900 ml-2 sm:col-span-2",children:"Title:"}),s.jsx("div",{className:"mt-1 text-sm leading-4 text-gray-700 sm:col-span-8",style:{textDecoration:e.completed?"line-through":"none"},children:e.title}),s.jsxs("div",{className:"flex justify-between sm:col-span-2 ml-2",children:[s.jsx("button",{type:"button",onClick:p,children:c?s.jsx(ke,{className:"h-6 w-6","aria-hidden":"true"}):s.jsx($e,{className:"h-6 w-6","aria-hidden":"true"})}),s.jsx(Le,{checked:u.completed,onChange:x=>{h("completed",x),n(e)}})]})]}),c&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-2 py-3 sm:grid sm:grid-cols-12 sm:gap-4 sm:px-0",children:[s.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900 ml-2 sm:col-span-2",children:"Description:"}),s.jsx("div",{className:"mt-1 text-sm leading-4 text-gray-700 sm:col-span-9",style:{textDecoration:e.completed?"line-through":"none"},children:e.description})]}),s.jsxs("div",{className:"px-2 py-3 sm:grid sm:grid-cols-12 sm:gap-4 sm:px-0",children:[s.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900 ml-2 sm:col-span-2",children:"Date & time:"}),s.jsx("div",{className:"mt-1 text-sm leading-4 text-gray-700 sm:col-span-9",style:{textDecoration:e.completed?"line-through":"none"},children:X(e.deadline)})]}),s.jsx("div",{className:"px-2 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:s.jsxs("div",{className:"flex py-2 pl-2 pr-3 text-sm leading-6",children:[s.jsx(w,{type:"button",className:"remove",text:"Remove",onClick:()=>l(e.id)}),s.jsx(w,{type:"button",className:"edit",text:"Edit",onClick:()=>y(e.id)})]})})]})]})})})},e.id)};export{Re as A,Ae as T};
